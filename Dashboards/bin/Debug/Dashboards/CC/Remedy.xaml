<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:std="clr-namespace:StandartObjectLibrary;assembly=StandartObjectLibrary">

  <Page.Resources>
    <XmlDataProvider x:Key="data" Source="http://172.27.129.37/SCOMSchema/Service.svc/GetSchema?name=Remedy%201%20Business%20Products%20Statistics" XPath="/RemedyData/RawData/BusinessProductsStatistics" />


    <Style TargetType="{x:Type ListBox}">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type ListBox}">

            <StackPanel IsItemsHost="True"
                        Orientation="Vertical"
                        HorizontalAlignment="Left" />
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="{x:Type ListBoxItem}">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type ListBoxItem}">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>

              <TextBlock Grid.Column="1" Foreground="White" Text="{Binding XPath=.}" FontSize="35" />
              <TextBlock Grid.Column="2" Foreground="White" Text="{Binding XPath=@name}" FontSize="35" Margin="0,0,10,0"/>
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="{x:Type TextBlock}">
      <Setter Property="FontSize" Value="12" />
      <Setter Property="FontFamily" Value="Segoe UI" />
      <Setter Property="FontWeight" Value="Normal" />
    </Style>

  </Page.Resources>

  <Viewbox Stretch="Uniform" Margin="10">
    <Grid Height="1000">
      <std:Group HeaderContent="  Remedy">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="380" />
            <RowDefinition Height="580" />
          </Grid.RowDefinitions>

          <std:Group Grid.Row="0"  HeaderContent="  Top 5 (1 h)" Margin="10" 
                   DataContext="{Binding Source={StaticResource data}, XPath=Period[@offset\=\'Data\ in\ an\ hour\']/WithGroups}">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
              </Grid.RowDefinitions>

              <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="50" />
                  <ColumnDefinition Width="120" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="1" Text="Count:" Foreground="#FF06FF00" FontSize="35" FontWeight="Bold" TextAlignment="Left" />
                <TextBlock Grid.Column="2" Text="Description:" Foreground="#FF06FF00" FontSize="35" FontWeight="Bold" TextAlignment="Left" />
              </Grid>

              <ListBox Grid.Row="1" ItemsSource="{Binding XPath=Product[\@zero\=\'False\' and position() &lt;\= 5]}" />
              <Line Grid.Row="2" Stroke="SteelBlue" StrokeThickness="1" X1="0" Y1="0" X2="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=ActualWidth}" Y2="0"/>

              <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="5">
                <TextBlock Grid.Row="2" Text="    Total: " Foreground="#FF06FF00" FontSize="35" FontWeight="Bold"/>
                <TextBlock Grid.Row="2" Text="{Binding XPath=Product[@name \=\'Total\']}" FontSize="35" FontWeight="Bold"/>
              </StackPanel>
            </Grid>
          </std:Group>

          <std:Group Grid.Row="1" HeaderContent="  Top 10 (24 h)" Margin="10" 
                   DataContext="{Binding Source={StaticResource data}, XPath=Period[@offset\=\'Data\ for\ 24\ hour\']/WithGroups}">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>

              <TextBlock Grid.Column="1" Text="Count:" Foreground="#FF06FF00" FontSize="35" FontWeight="Bold" TextAlignment="Left" />
              <TextBlock Grid.Column="2" Text="Description:" Foreground="#FF06FF00" FontSize="35" FontWeight="Bold" TextAlignment="Left" />
            </Grid>

            <ListBox Grid.Row="1" ItemsSource="{Binding XPath=Product[\@zero\=\'False\' and position() &lt;\= 10]}" />
            <Line Grid.Row="2" Stroke="SteelBlue" StrokeThickness="1" X1="0" Y1="0" X2="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=ActualWidth}" Y2="0"/>


            <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center">
              <TextBlock Grid.Row="2" Text="      Total: " Foreground="#FF06FF00" FontSize="35" FontWeight="Bold"/>
              <TextBlock Grid.Row="2" Text="{Binding XPath=Product[@name \=\'Total\']}" FontSize="35" FontWeight="Bold"/>
            </StackPanel>
          </Grid>
        </std:Group>
        </Grid>
      </std:Group>
    </Grid>
  </Viewbox>
</Page>